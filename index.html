<!DOCTYPE html>
<html>
    <head>
        <meta charset="ut8">
        <title>Etch-a-Sketch</title>
        <link rel="stylesheet" href="eas.css">
    </head>
    <body>
        <div class="header">
            Etch-a-Sketch
        </div>
        <div class="container">
            <div class="controls">
                <div class="sizeControl">
                    <p>Change size</p>
                    <input type="range" min="4" max="64" value="20" id="slider">
                    <div id="sizeValue">20 x 20</div>
                </div>
                <div class="colorControl">
                    <p>Change color</p>
                    <input id="colorPicker" type="color" value="#e7581a"/>
                </div>
                <button id="resetBtn">Reset</button>
            </div>
            <div id="grid">
            </div>
        </div>
    </body>
    <script>
        const grid = document.querySelector('#grid');
        const restart = document.querySelector('#resetBtn');
        const colorPicker = document.getElementById('colorPicker');
        const slider = document.getElementById('slider');
        const sizeValue = document.getElementById('sizeValue');

        const defaultSize = 20;
        const defaultColor = '#e7581a';
        let currentSize = defaultSize;
        let currentColor = defaultColor;

        function setCurrentColor(newColor) {
            currentColor = newColor
        };

        function setCurrentSize(newSize) {
            currentSize = newSize
        };
        
        function createGrid(gridNumber){
            let gridArea = gridNumber * gridNumber;
            for (let i=1; i <= gridArea; i++) {
                let divBox = document.createElement("div");
                divBox.classList.add('divBox');
                grid.appendChild(divBox);
                grid.style.gridTemplateColumns = `repeat(${gridNumber}, 1fr)`;
                grid.style.gridTemplateRows = `repeat(${gridNumber}, 1fr)`;
                divBox.addEventListener('mouseover', changeColor);
                divBox.addEventListener('mousedown', changeColor);
                }
            };

        createGrid(20);

        colorPicker.oninput = (e) => setCurrentColor(e.target.value);
        slider.onchange = (e) => changeSize(e.target.value);
        slider.onmousemove = (e) => updateSizeValue(e.target.value);

        function changeSize(value) {
        setCurrentSize(value);
        updateSizeValue(value);
        reloadGrid();
        }

        function reloadGrid(){
            grid.innerHTML = '';
            createGrid(currentSize);
        }

        function updateSizeValue(value) {
            sizeValue.innerHTML = `${value} x ${value}`
        }

        let mouseDown = false;
        document.body.onmousedown = () => (mouseDown = true);
        document.body.onmouseup = () => (mouseDown = false);

        function changeColor(e) {
            if (e.type === 'mouseover' && !mouseDown) return;
            e.target.style.backgroundColor = currentColor;
        }
        
        function resetGrid() {
            grid.innerHTML = '';
            };

        
        grid.addEventListener('mouseover', function(e) {
            if (e.target.matches('.divBox')) {
                e.target.classList.add('active');
            }
        });
        restart.addEventListener('click', reloadGrid);
        //pseudocode
        //need function to create grid with cells
        //need function to reset grid
        //need button to reset grid using reset function
        //need function to change color of grid
        //need button to change color of grid using color change function
        //need function to change size of grid
        //need button to change size of grid using Javascript

    </script>
</html>
